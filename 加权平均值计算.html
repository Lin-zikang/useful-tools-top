<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŠ æƒå¹³å‡è®¡ç®—å™¨</title>
	<link rel="icon" href="https://user-assets.sxlcdn.com/images/1209238/FlWuslNmGTHt1EipxUtq2GI6zqnN.png?imageMogr2/strip/auto-orient/thumbnail/1200x9000%3E/quality/90!/format/png" type="image/png">
    <style>
        body {
            max-width: 800px;
            margin: 2rem auto;
            padding: 20px;
            font-family: 'Segoe UI', sans-serif;
            background: #f0f3f5;
        }
        .calculator {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 2rem;
        }
        .input-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }
        input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            width: 120px;
            transition: border-color 0.3s;
        }
        input:focus {
            border-color: #2196F3;
            outline: none;
        }
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
        }
        .result {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h2>ğŸ”¢ æ™ºèƒ½åŠ æƒå¹³å‡è®¡ç®—å™¨</h2>
        
        <div class="input-row">
            <button onclick="addRow()">â• æ·»åŠ è¡Œ</button>
            <button onclick="calculate()">ğŸš€ å¼€å§‹è®¡ç®—</button>
        </div>
 
        <table id="dataTable">
            <thead>
                <tr>
                    <th>æ•°å€¼ (X)</th>
                    <th>æƒé‡ (W)</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="number" step="0.01" placeholder="ä¾‹å¦‚ï¼š85"></td>
                    <td><input type="number" step="0.01" min="0" placeholder="ä¾‹å¦‚ï¼š0.3"></td>
                    <td><button onclick="deleteRow(this)" style="background:#ff5252">ğŸ—‘ï¸ åˆ é™¤</button></td>
                </tr>
            </tbody>
        </table>
 
        <div class="result" id="result"></div>
    </div>
 
    <script>
        let rowCount = 1;
 
        // æ·»åŠ æ•°æ®è¡Œï¼ˆæ”¯æŒè¿ç»­æ·»åŠ ï¼‰
        function addRow() {
            const tbody = document.querySelector('#dataTable  tbody');
            const newRow = document.createElement('tr'); 
            newRow.innerHTML  = `
                <td><input type="number" step="0.01"></td>
                <td><input type="number" step="0.01" min="0"></td>
                <td><button onclick="deleteRow(this)" style="background:#ff5252">ğŸ—‘ï¸ åˆ é™¤</button></td>
            `;
            tbody.appendChild(newRow); 
        }
 
        // åˆ é™¤è¡Œï¼ˆè‡ªåŠ¨èšç„¦å‰ä¸€è¡Œï¼‰
        function deleteRow(btn) {
            const row = btn.closest('tr'); 
            row.remove(); 
        }
 
        // æ ¸å¿ƒè®¡ç®—é€»è¾‘ï¼ˆå‚è€ƒ[2]()[3]()ï¼‰
        function calculate() {
            const inputs = document.querySelectorAll('input[type="number"]'); 
            let sumXW = 0, sumW = 0;
            let hasError = false;
 
            // éå†è¾“å…¥æ•°æ® 
            for(let i=0; i<inputs.length;  i+=2) {
                const x = parseFloat(inputs[i].value);
                const w = parseFloat(inputs[i+1].value);
                
                // è¾“å…¥éªŒè¯ï¼ˆå‚è€ƒ[3]()çš„æ ‡å‡†åŒ–æƒé‡éªŒè¯ï¼‰
                if (isNaN(x) || isNaN(w) || w < 0) {
                    inputs[i].style.borderColor  = '#ff5252';
                    inputs[i+1].style.borderColor  = '#ff5252';
                    hasError = true;
                    continue;
                }
                
                // é‡ç½®æ ·å¼ 
                inputs[i].style.borderColor  = '#ddd';
                inputs[i+1].style.borderColor  = '#ddd';
                
                sumXW += x * w;
                sumW += w;
            }
 
            // é”™è¯¯å¤„ç†ï¼ˆå‚è€ƒ[7]()çš„æƒé‡éªŒè¯ï¼‰
            if (hasError) {
                showResult('âŒ å­˜åœ¨æ— æ•ˆè¾“å…¥ï¼ˆæ•°å€¼éœ€ä¸ºæ•°å­—ï¼Œæƒé‡â‰¥0ï¼‰', 'error');
                return;
            }
            if (sumW === 0) {
                showResult('âš ï¸ æ€»æƒé‡ä¸èƒ½ä¸ºé›¶', 'warning');
                return;
            }
 
            const weightedAvg = sumXW / sumW;
            showResult(`âœ… åŠ æƒå¹³å‡å€¼ = ${weightedAvg.toFixed(2)}`); 
        }
 
        // ç»“æœæ˜¾ç¤ºï¼ˆæ”¯æŒå¤šçŠ¶æ€ï¼‰
        function showResult(msg, type = 'success') {
            const resultDiv = document.getElementById('result'); 
            resultDiv.innerHTML  = msg;
            resultDiv.style.color  = type === 'error' ? '#ff5252' : 
                                  type === 'warning' ? '#ffa726' : '#2e7d32';
        }
    </script>
</body>
</html>